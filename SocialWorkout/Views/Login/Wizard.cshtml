
@{
	Layout = null;

	string UserID = @ViewBag.UserId;
}

<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>Compleate Registeration</title>
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
	<meta name="viewport" content="width=device-width" />


	<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.1.0.min.js"></script>
	<!--Angular -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular-animate.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<!--     Fonts and icons     -->
	<link href="http://netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.css" rel="stylesheet">

	<!-- CSS Files -->

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link href="~/Content/x-bootstrap-wizard-v1.1.1/assets/css/gsdk-bootstrap-wizard.css" rel="stylesheet" />

	<!-- DX cdn-->
	<!-- DevExtreme themes -->
	<link rel="stylesheet" type="text/css" href="https://cdn3.devexpress.com/jslib/18.1.4/css/dx.common.css" />
	<link rel="stylesheet" type="text/css" href="https://cdn3.devexpress.com/jslib/18.1.4/css/dx.light.css" />
	<!-- A DevExtreme library -->
	<script type="text/javascript" src="https://cdn3.devexpress.com/jslib/18.1.4/js/dx.all.js"></script>
	<style>
		#map {
			height: 40%;
			width: 30%;
			position:absolute !important;
			margin-top:5%;
		}
	</style>

</head>
<body ng-app="wizardApp" ng-controller="wizardCtrl">
	<div class="image-container set-full-height" style="background-color: #2c3338;">


		<!--   Big container   -->
		<div class="container">
			<div class="row">
				<div class="col-sm-8 col-sm-offset-2">
					<!--      Wizard container        -->
					<div class="wizard-container">
						<div class="card wizard-card" data-color="green" id="wizard" style="width:101%">
							<form action="" method="">
								<!--        You can switch ' data-color="green" '  with one of the next bright colors: "blue", "green", "orange", "red"          -->
								<div class="wizard-header">
									<h3>
										<b>Welcome</b>  {{user.FirstName}} <br>
										<small>We almost there.</small>

										<small>Let us know about you for the best experience.</small>

									</h3>
								</div>
								<div class="wizard-navigation">
									<ul>
										<li><a href="#location" data-toggle="tab">Location</a></li>
										<li><a href="#type" data-toggle="tab">Favorite Sports</a></li>
										<li><a href="#facilities" data-toggle="tab">Personal Preferences</a></li>
										<li><a href="#description" data-toggle="tab">Description</a></li>
									</ul>
								</div>
								<div class="tab-content">
									<div class="tab-pane" id="location">
										<div class="container">
											<div class="row" style="width: 65.6%;">
												<div align="center" class="col-sm-4" id="map">


												</div>
												<div align="center" class="col-sm-4">
													Your current Location
												</div>
												<div align="center" class="col-sm-4">
													One of three columns
												</div>
												<div align="center" class="col-sm-4">
													One of three columns
												</div>
											</div>
										</div>

									</div>
									<div class="tab-pane" id="type">
										<h4 class="info-text">Choose your favorite sports </h4>
										<div class="row">
										<div id="tagBoxContainer"></div>
										</div>
									</div>
									<div class="tab-pane" id="facilities">
										<h4 class="info-text">Tell us more about facilities. </h4>
										<div class="row">
										
											<div class="col-sm-5">
												<div class="form-group">
													<label>Is air conditioning included ?</label>
													<select class="form-control">
														<option disabled="" selected="">- response -</option>
														<option>Yes</option>
														<option>No </option>
													</select>
												</div>
											</div>
											<div class="col-sm-5 col-sm-offset-1">
												<div class="form-group">
													<label>Does your place have wi-fi?</label>
													<select class="form-control">
														<option disabled="" selected="">- response -</option>
														<option>Yes</option>
														<option>No </option>
													</select>
												</div>
											</div>
											<div class="col-sm-5">
												<div class="form-group">
													<label>Is breakfast included?</label>
													<select class="form-control">
														<option disabled="" selected="">- response -</option>
														<option>Yes</option>
														<option>No </option>
													</select>
												</div>
											</div>
										</div>
									</div>
									<div class="tab-pane" id="description">
										<div class="row">
											<h4 class="info-text"> Drop us a small description. </h4>
											<div class="col-sm-6 col-sm-offset-1">
												<div class="form-group">
													<label>Place description</label>
													<textarea ng-model="Description" class="form-control" placeholder="" rows="9">

											</textarea>
												</div>
											</div>
											<div class="col-sm-4">
												<div class="form-group">
													<label>Example</label>
													<p class="description">"The place is really nice. We use it every sunday when we go fishing. It is so awesome."</p>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="wizard-footer">
									<div class="pull-right">
										<input type='button' class='btn btn-next btn-fill btn-success btn-wd btn-sm' name='next' value='Next' />
										<input ng-click="clicked()" type='button' class='btn btn-finish btn-fill btn-success btn-wd btn-sm' value='Finish' />
										<div ng-show="Finish" ng-model="Finish">
											<i class="fa fa-spinner fa-spin" style="margin-left: 41%;font-size: 24px; margin-top: 7%;"></i>
										</div>

									</div>
									<div class="pull-left">
										<input type='button' class='btn btn-previous btn-fill btn-default btn-wd btn-sm' name='previous' value='Previous' />
									</div>
									<div class="clearfix"></div>
								</div>
							</form>
						</div>
					</div> <!-- wizard container -->
				</div>
			</div> <!-- row -->
		</div> <!--  big container -->


	</div>
	<script>

		var arr;

		$.get("http://localhost:58948/api/dropDownData", function (data) {
			
			arr = data;
			console.log(arr);
		});

		var tagBoxData = [
			{ id: 1, country: "Afghanistan" },
			{ id: 2, country: "Albania" },
			// . . .
		];

		$(function () {
			$("#tagBoxContainer").dxTagBox({
				dataSource: arr,
				valueExpr: 'id',
				displayExpr: 'favoriteSports'
			});
		});

	



	</script>
	<script>
		var app = angular.module('wizardApp', []);

		app.controller('wizardCtrl', function ($scope, $http) {

			$http.get("http://localhost:58948/api/users/@UserID").then(function (response) {
				//getting data tru an object
				$scope.user = response.data;
				var userObj = $scope.user;

				//print data to console
				console.log("user", userObj);

				//put the Updated user content into Mlab -- users dataBase

				$scope.clicked = function myfunction() {
					//ng show the spinner
					$scope.Finish = true;
					//Updating inner Object data After user Click
					userObj.preferens = { PreferedTime: $scope.PreferedTime, Description:$scope.Description};
				$http.put("http://localhost:58948/api/users", userObj).then(function (response) {
					console.log(response.status);


				});
				}
			});

		});

	</script>
	<!-- Scrips for Maps-->
	<script src="~/Scripts/Maps/CurrentLocation.js"></script>
	<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBV6Zmi60-AGfLtqBgbMSsbEeyVlLWJM_s&callback=initMap">
	</script>

</body>
<!--   Core JS Files   -->

<script src="~/Content/x-bootstrap-wizard-v1.1.1/assets/js/bootstrap.min.js"></script>
<script src="~/Content/x-bootstrap-wizard-v1.1.1/assets/js/jquery.bootstrap.wizard.js"></script>
<!--  Plugin for the Wizard -->
<script src="~/Content/x-bootstrap-wizard-v1.1.1/assets/js/gsdk-bootstrap-wizard.js"></script>

<script src="~/Content/x-bootstrap-wizard-v1.1.1/assets/js/jquery.validate.min.js"></script>
</html>
